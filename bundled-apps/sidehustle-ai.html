<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SideHustleAI - å‰¯æ¥­ãƒ»ãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹ã®AIç›¸æ£’</title>
<script src="https://cdn.tailwindcss.com"></script>
<script>
tailwind.config = {
  theme: {
    extend: {
      colors: {
        brand: {
          50: '#ecfdf5',
          100: '#d1fae5',
          200: '#a7f3d0',
          300: '#6ee7b7',
          400: '#34d399',
          500: '#10b981',
          600: '#059669',
          700: '#047857',
          800: '#065f46',
          900: '#064e3b',
          950: '#022c22',
        }
      }
    }
  }
}
</script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=Noto+Sans+JP:wght@400;500;600;700;800;900&display=swap');

* { margin: 0; padding: 0; box-sizing: border-box; }

body {
  font-family: 'Noto Sans JP', 'Inter', sans-serif;
  background: #f0fdf4;
  min-height: 100vh;
  overflow-x: hidden;
}

.gradient-header {
  background: linear-gradient(135deg, #064e3b 0%, #047857 30%, #059669 60%, #0d9488 100%);
}

.gradient-btn {
  background: linear-gradient(135deg, #059669 0%, #0d9488 100%);
  transition: all 0.3s ease;
}
.gradient-btn:hover {
  background: linear-gradient(135deg, #047857 0%, #0f766e 100%);
  transform: translateY(-1px);
  box-shadow: 0 8px 25px rgba(5, 150, 105, 0.35);
}
.gradient-btn:active { transform: translateY(0); }

.tab-content {
  opacity: 0;
  transform: translateY(12px);
  transition: opacity 0.35s ease, transform 0.35s ease;
  display: none;
}
.tab-content.active {
  display: block;
  opacity: 1;
  transform: translateY(0);
}

.result-section {
  opacity: 0;
  transform: translateY(20px);
  transition: opacity 0.5s ease, transform 0.5s ease;
}
.result-section.visible {
  opacity: 1;
  transform: translateY(0);
}

.upload-zone {
  border: 2px dashed #a7f3d0;
  background: linear-gradient(135deg, rgba(236,253,245,0.8), rgba(209,250,229,0.5));
  transition: all 0.3s ease;
}
.upload-zone:hover, .upload-zone.dragover {
  border-color: #34d399;
  background: linear-gradient(135deg, rgba(209,250,229,0.9), rgba(167,243,208,0.5));
  transform: scale(1.01);
}
.upload-zone.has-file {
  border-color: #10b981;
  border-style: solid;
  background: linear-gradient(135deg, rgba(209,250,229,1), rgba(167,243,208,0.7));
}

.bottom-nav {
  backdrop-filter: blur(20px);
  background: rgba(255,255,255,0.92);
  border-top: 1px solid rgba(167,243,208,0.5);
}

.nav-item {
  transition: all 0.25s ease;
  position: relative;
}
.nav-item.active {
  color: #059669;
}
.nav-item.active::before {
  content: '';
  position: absolute;
  top: -1px;
  left: 50%;
  transform: translateX(-50%);
  width: 40px;
  height: 3px;
  background: linear-gradient(90deg, #059669, #0d9488);
  border-radius: 0 0 4px 4px;
}

.spinner {
  width: 40px; height: 40px;
  border: 4px solid #d1fae5;
  border-top-color: #059669;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.3); }
  50% { box-shadow: 0 0 0 10px rgba(16, 185, 129, 0); }
}
.pulse-glow { animation: pulse-glow 2s ease-in-out infinite; }

.risk-bar-bg { background: #e5e7eb; border-radius: 9999px; overflow: hidden; }
.risk-bar-fill {
  height: 100%;
  border-radius: 9999px;
  transition: width 1s ease;
}

.card {
  background: white;
  border-radius: 16px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.06), 0 4px 12px rgba(0,0,0,0.04);
  border: 1px solid rgba(167,243,208,0.3);
}

input:focus, textarea:focus, select:focus {
  outline: none;
  border-color: #34d399;
  box-shadow: 0 0 0 3px rgba(52, 211, 153, 0.15);
}

.toast {
  position: fixed;
  top: 20px;
  left: 50%;
  transform: translateX(-50%) translateY(-100px);
  transition: transform 0.4s ease;
  z-index: 100;
}
.toast.show {
  transform: translateX(-50%) translateY(0);
}

.file-preview-img {
  max-height: 200px;
  object-fit: contain;
  border-radius: 12px;
}
</style>
</head>
<body class="pb-24">

<!-- Toast -->
<div id="toast" class="toast">
  <div class="bg-brand-800 text-white px-6 py-3 rounded-xl shadow-lg text-sm font-medium flex items-center gap-2">
    <svg class="w-5 h-5 text-brand-300" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/></svg>
    <span id="toast-msg"></span>
  </div>
</div>

<!-- Header -->
<header class="gradient-header text-white pt-12 pb-6 px-5 relative overflow-hidden">
  <div class="absolute inset-0 opacity-10">
    <div class="absolute top-4 right-8 text-6xl">ğŸ’°</div>
    <div class="absolute bottom-2 left-6 text-4xl">ğŸ“Š</div>
    <div class="absolute top-8 left-1/2 text-3xl">ğŸš€</div>
  </div>
  <div class="relative z-10 max-w-lg mx-auto">
    <h1 class="text-2xl font-extrabold tracking-tight">SideHustleAI</h1>
    <p class="text-emerald-200 text-sm mt-1 font-medium">å‰¯æ¥­ãƒ»ãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹ã®AIç›¸æ£’</p>
  </div>
</header>

<!-- Main Content -->
<main class="max-w-lg mx-auto px-4 pt-5 pb-4">

  <!-- Tab 1: ListingAI -->
  <div id="tab-listing" class="tab-content active">
    <div class="flex items-center gap-2 mb-4">
      <span class="text-2xl">ğŸ·ï¸</span>
      <div>
        <h2 class="text-lg font-bold text-brand-900">å‡ºå“æ–‡ç”Ÿæˆ</h2>
        <p class="text-xs text-gray-500">å•†å“å†™çœŸã‹ã‚‰AIãŒå‡ºå“æ–‡ã‚’è‡ªå‹•ä½œæˆ</p>
      </div>
    </div>

    <div class="card p-5 mb-4">
      <label class="block text-sm font-semibold text-gray-700 mb-2">å•†å“å†™çœŸã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</label>
      <div id="listing-upload" class="upload-zone rounded-2xl p-8 text-center cursor-pointer" onclick="document.getElementById('listing-file').click()">
        <div id="listing-upload-content">
          <div class="text-4xl mb-3">ğŸ“¸</div>
          <p class="text-sm font-semibold text-brand-700">ã‚¿ãƒƒãƒ—ã—ã¦å†™çœŸã‚’é¸æŠ</p>
          <p class="text-xs text-gray-400 mt-1">JPG, PNG, HEICå¯¾å¿œ</p>
        </div>
        <div id="listing-preview" class="hidden">
          <img id="listing-preview-img" class="file-preview-img mx-auto mb-2" alt="ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼">
          <p id="listing-file-name" class="text-xs text-brand-600 font-medium"></p>
        </div>
      </div>
      <input type="file" id="listing-file" accept="image/*" class="hidden" onchange="handleListingFile(this)">

      <div class="mt-4">
        <label class="block text-sm font-semibold text-gray-700 mb-1">ã‚«ãƒ†ã‚´ãƒªï¼ˆä»»æ„ï¼‰</label>
        <select class="w-full border border-gray-200 rounded-xl px-4 py-3 text-sm bg-white">
          <option value="">è‡ªå‹•åˆ¤å®š</option>
          <option>ãƒ¡ãƒ³ã‚ºé´</option>
          <option>ãƒ¬ãƒ‡ã‚£ãƒ¼ã‚¹æœ</option>
          <option>å®¶é›»ãƒ»ã‚¹ãƒãƒ›</option>
          <option>ãƒ›ãƒ“ãƒ¼ãƒ»ãŠã‚‚ã¡ã‚ƒ</option>
          <option>æœ¬ãƒ»é›‘èªŒ</option>
        </select>
      </div>
    </div>

    <button onclick="processListing()" class="gradient-btn w-full text-white font-bold py-4 rounded-2xl text-base shadow-lg">
      âœ¨ AIã§å‡ºå“æ–‡ã‚’ç”Ÿæˆã™ã‚‹
    </button>

    <!-- Loading -->
    <div id="listing-loading" class="hidden mt-6 text-center">
      <div class="spinner mx-auto mb-3"></div>
      <p class="text-sm text-brand-700 font-medium">å•†å“ã‚’åˆ†æã—ã¦ã„ã¾ã™...</p>
      <p class="text-xs text-gray-400 mt-1">å†™çœŸã‹ã‚‰ç‰¹å¾´ã‚’èª­ã¿å–ã‚Šä¸­</p>
    </div>

    <!-- Results -->
    <div id="listing-results" class="mt-5 space-y-4">
      <!-- filled by JS -->
    </div>
  </div>

  <!-- Tab 2: InvoiceAI -->
  <div id="tab-invoice" class="tab-content">
    <div class="flex items-center gap-2 mb-4">
      <span class="text-2xl">ğŸ’´</span>
      <div>
        <h2 class="text-lg font-bold text-brand-900">è«‹æ±‚æ›¸ä½œæˆ</h2>
        <p class="text-xs text-gray-500">æƒ…å ±å…¥åŠ›ã§ãƒ—ãƒ­ä»•æ§˜ã®è«‹æ±‚æ›¸ã‚’å³ç”Ÿæˆ</p>
      </div>
    </div>

    <div class="card p-5 mb-4 space-y-4">
      <div>
        <label class="block text-sm font-semibold text-gray-700 mb-1">å–å¼•å…ˆå</label>
        <input id="inv-client" type="text" placeholder="æ ªå¼ä¼šç¤¾ã‚µãƒ³ãƒ—ãƒ«" class="w-full border border-gray-200 rounded-xl px-4 py-3 text-sm">
      </div>
      <div>
        <label class="block text-sm font-semibold text-gray-700 mb-1">é …ç›®</label>
        <input id="inv-item" type="text" placeholder="Webã‚µã‚¤ãƒˆåˆ¶ä½œ" class="w-full border border-gray-200 rounded-xl px-4 py-3 text-sm">
      </div>
      <div class="grid grid-cols-2 gap-3">
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-1">é‡‘é¡ï¼ˆç¨æŠœï¼‰</label>
          <div class="relative">
            <span class="absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 text-sm">Â¥</span>
            <input id="inv-amount" type="number" placeholder="300000" class="w-full border border-gray-200 rounded-xl pl-8 pr-4 py-3 text-sm">
          </div>
        </div>
        <div>
          <label class="block text-sm font-semibold text-gray-700 mb-1">æ”¯æ‰•æœŸé™</label>
          <input id="inv-deadline" type="text" placeholder="2025/02/28" class="w-full border border-gray-200 rounded-xl px-4 py-3 text-sm">
        </div>
      </div>
      <div>
        <label class="block text-sm font-semibold text-gray-700 mb-1">å‚™è€ƒï¼ˆä»»æ„ï¼‰</label>
        <textarea placeholder="ãŠæŒ¯è¾¼æ‰‹æ•°æ–™ã¯ã”è² æ‹…é¡˜ã„ã¾ã™" class="w-full border border-gray-200 rounded-xl px-4 py-3 text-sm h-20 resize-none"></textarea>
      </div>
    </div>

    <button onclick="processInvoice()" class="gradient-btn w-full text-white font-bold py-4 rounded-2xl text-base shadow-lg">
      âœ¨ AIã§è«‹æ±‚æ›¸ã‚’ä½œæˆã™ã‚‹
    </button>

    <!-- Loading -->
    <div id="invoice-loading" class="hidden mt-6 text-center">
      <div class="spinner mx-auto mb-3"></div>
      <p class="text-sm text-brand-700 font-medium">è«‹æ±‚æ›¸ã‚’ç”Ÿæˆã—ã¦ã„ã¾ã™...</p>
      <p class="text-xs text-gray-400 mt-1">ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæœ€é©åŒ–ä¸­</p>
    </div>

    <!-- Results -->
    <div id="invoice-results" class="mt-5 space-y-4">
      <!-- filled by JS -->
    </div>
  </div>

  <!-- Tab 3: ContractAI -->
  <div id="tab-contract" class="tab-content">
    <div class="flex items-center gap-2 mb-4">
      <span class="text-2xl">âš–ï¸</span>
      <div>
        <h2 class="text-lg font-bold text-brand-900">å¥‘ç´„æ›¸ãƒã‚§ãƒƒã‚¯</h2>
        <p class="text-xs text-gray-500">å¥‘ç´„æ›¸PDFã‚’AIãŒãƒªã‚¹ã‚¯è¨ºæ–­</p>
      </div>
    </div>

    <div class="card p-5 mb-4">
      <label class="block text-sm font-semibold text-gray-700 mb-2">å¥‘ç´„æ›¸ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</label>
      <div id="contract-upload" class="upload-zone rounded-2xl p-8 text-center cursor-pointer" onclick="document.getElementById('contract-file').click()">
        <div id="contract-upload-content">
          <div class="text-4xl mb-3">ğŸ“„</div>
          <p class="text-sm font-semibold text-brand-700">ã‚¿ãƒƒãƒ—ã—ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é¸æŠ</p>
          <p class="text-xs text-gray-400 mt-1">PDF, DOC, DOCXå¯¾å¿œ</p>
        </div>
        <div id="contract-preview" class="hidden text-center">
          <div class="text-4xl mb-2">ğŸ“‹</div>
          <p id="contract-file-name" class="text-sm text-brand-700 font-semibold"></p>
          <p id="contract-file-size" class="text-xs text-gray-400 mt-1"></p>
        </div>
      </div>
      <input type="file" id="contract-file" accept=".pdf,.doc,.docx" class="hidden" onchange="handleContractFile(this)">

      <div class="mt-4">
        <label class="block text-sm font-semibold text-gray-700 mb-1">å¥‘ç´„ç¨®é¡ï¼ˆä»»æ„ï¼‰</label>
        <select class="w-full border border-gray-200 rounded-xl px-4 py-3 text-sm bg-white">
          <option value="">è‡ªå‹•åˆ¤å®š</option>
          <option>æ¥­å‹™å§”è¨—å¥‘ç´„</option>
          <option>ç§˜å¯†ä¿æŒå¥‘ç´„ï¼ˆNDAï¼‰</option>
          <option>å£²è²·å¥‘ç´„</option>
          <option>è³ƒè²¸å€Ÿå¥‘ç´„</option>
          <option>é›‡ç”¨å¥‘ç´„</option>
        </select>
      </div>
    </div>

    <button onclick="processContract()" class="gradient-btn w-full text-white font-bold py-4 rounded-2xl text-base shadow-lg">
      âœ¨ AIã§ãƒªã‚¹ã‚¯è¨ºæ–­ã™ã‚‹
    </button>

    <!-- Loading -->
    <div id="contract-loading" class="hidden mt-6 text-center">
      <div class="spinner mx-auto mb-3"></div>
      <p class="text-sm text-brand-700 font-medium">å¥‘ç´„æ›¸ã‚’åˆ†æã—ã¦ã„ã¾ã™...</p>
      <p class="text-xs text-gray-400 mt-1">æ¡é …ã‚’ã²ã¨ã¤ãšã¤ç¢ºèªä¸­</p>
    </div>

    <!-- Results -->
    <div id="contract-results" class="mt-5 space-y-4">
      <!-- filled by JS -->
    </div>
  </div>

</main>

<!-- Bottom Navigation -->
<nav class="bottom-nav fixed bottom-0 left-0 right-0 z-50 shadow-[0_-4px_20px_rgba(0,0,0,0.06)]">
  <div class="max-w-lg mx-auto flex">
    <button onclick="switchTab('listing')" id="nav-listing" class="nav-item active flex-1 flex flex-col items-center py-3 gap-0.5">
      <span class="text-xl">ğŸ·ï¸</span>
      <span class="text-xs font-semibold">å‡ºå“</span>
    </button>
    <button onclick="switchTab('invoice')" id="nav-invoice" class="nav-item flex-1 flex flex-col items-center py-3 gap-0.5 text-gray-400">
      <span class="text-xl">ğŸ’´</span>
      <span class="text-xs font-semibold">è«‹æ±‚æ›¸</span>
    </button>
    <button onclick="switchTab('contract')" id="nav-contract" class="nav-item flex-1 flex flex-col items-center py-3 gap-0.5 text-gray-400">
      <span class="text-xl">âš–ï¸</span>
      <span class="text-xs font-semibold">å¥‘ç´„æ›¸</span>
    </button>
  </div>
</nav>

<script>
/* â”€â”€â”€â”€â”€ Tab Switching â”€â”€â”€â”€â”€ */
function switchTab(tab) {
  document.querySelectorAll('.tab-content').forEach(el => {
    el.classList.remove('active');
  });
  document.querySelectorAll('.nav-item').forEach(el => {
    el.classList.remove('active');
    el.classList.add('text-gray-400');
  });

  const target = document.getElementById('tab-' + tab);
  const nav = document.getElementById('nav-' + tab);

  // tiny delay for transition
  requestAnimationFrame(() => {
    target.classList.add('active');
    nav.classList.add('active');
    nav.classList.remove('text-gray-400');
  });
}

/* â”€â”€â”€â”€â”€ Toast â”€â”€â”€â”€â”€ */
function showToast(msg) {
  const t = document.getElementById('toast');
  document.getElementById('toast-msg').textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2500);
}

/* â”€â”€â”€â”€â”€ Utility â”€â”€â”€â”€â”€ */
function formatNum(n) {
  return Number(n).toLocaleString('ja-JP');
}

function revealResults(container) {
  const sections = container.querySelectorAll('.result-section');
  sections.forEach((s, i) => {
    setTimeout(() => s.classList.add('visible'), i * 180);
  });
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   1. ListingAI
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let listingFileReady = false;

function handleListingFile(input) {
  const file = input.files[0];
  if (!file) return;
  listingFileReady = true;
  const zone = document.getElementById('listing-upload');
  zone.classList.add('has-file');
  document.getElementById('listing-upload-content').classList.add('hidden');
  const preview = document.getElementById('listing-preview');
  preview.classList.remove('hidden');
  document.getElementById('listing-file-name').textContent = file.name;
  const reader = new FileReader();
  reader.onload = e => {
    document.getElementById('listing-preview-img').src = e.target.result;
  };
  reader.readAsDataURL(file);
}

function processListing() {
  if (!listingFileReady) {
    showToast('å•†å“å†™çœŸã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„');
    return;
  }
  const loader = document.getElementById('listing-loading');
  const results = document.getElementById('listing-results');
  results.innerHTML = '';
  loader.classList.remove('hidden');

  setTimeout(() => {
    loader.classList.add('hidden');
    results.innerHTML = `
      <!-- Title -->
      <div class="result-section card p-5">
        <div class="flex items-center gap-2 mb-3">
          <span class="bg-brand-100 text-brand-700 text-xs font-bold px-2.5 py-1 rounded-lg">ã‚¿ã‚¤ãƒˆãƒ«</span>
          <span class="text-xs text-gray-400">è‡ªå‹•ç”Ÿæˆ</span>
        </div>
        <p class="text-base font-bold text-gray-900 leading-relaxed">ã€ç¾å“ã€‘Nike Air Max 90 ãƒ›ãƒ¯ã‚¤ãƒˆ 27cm</p>
        <button onclick="copyText('ã€ç¾å“ã€‘Nike Air Max 90 ãƒ›ãƒ¯ã‚¤ãƒˆ 27cm');showToast('ã‚¿ã‚¤ãƒˆãƒ«ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ')" class="mt-3 text-xs text-brand-600 font-semibold flex items-center gap-1 hover:text-brand-800">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>
          ã‚³ãƒ”ãƒ¼
        </button>
      </div>

      <!-- Price -->
      <div class="result-section card p-5">
        <div class="flex items-center gap-2 mb-3">
          <span class="bg-amber-100 text-amber-700 text-xs font-bold px-2.5 py-1 rounded-lg">æ¨å¥¨ä¾¡æ ¼</span>
          <span class="text-xs text-gray-400">å¸‚å ´åˆ†æ</span>
        </div>
        <div class="flex items-end gap-2 mb-2">
          <span class="text-3xl font-extrabold text-brand-700">Â¥8,500</span>
          <span class="text-gray-400 text-lg font-bold">ã€œ</span>
          <span class="text-3xl font-extrabold text-brand-700">Â¥9,800</span>
        </div>
        <div class="bg-gray-50 rounded-xl p-3 mt-3">
          <div class="flex justify-between text-xs text-gray-500 mb-1">
            <span>å¸‚å ´æœ€å®‰å€¤</span><span>å¸‚å ´æœ€é«˜å€¤</span>
          </div>
          <div class="risk-bar-bg h-2.5">
            <div class="risk-bar-fill bg-gradient-to-r from-brand-400 to-teal-400" style="width:0%" id="price-bar"></div>
          </div>
          <div class="flex justify-between text-xs text-gray-500 mt-1">
            <span>Â¥6,000</span><span>Â¥12,500</span>
          </div>
        </div>
        <p class="text-xs text-gray-500 mt-3">ğŸ“Š ç›´è¿‘30æ—¥é–“ã§åŒå•†å“ãŒ <strong class="text-brand-700">23ä»¶</strong> å–å¼•ã•ã‚Œã¦ã„ã¾ã™</p>
      </div>

      <!-- Description -->
      <div class="result-section card p-5">
        <div class="flex items-center gap-2 mb-3">
          <span class="bg-blue-100 text-blue-700 text-xs font-bold px-2.5 py-1 rounded-lg">å•†å“èª¬æ˜</span>
        </div>
        <div class="text-sm text-gray-700 leading-relaxed space-y-2" id="listing-desc">
          <p>ã”è¦§ã„ãŸã ãã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚</p>
          <p>Nike Air Max 90 ãƒ›ãƒ¯ã‚¤ãƒˆã®27cmã§ã™ã€‚<br>2å›ã®ã¿çŸ­æ™‚é–“ç€ç”¨ã®ç¾å“ã§ã™ã€‚</p>
          <p>ã€çŠ¶æ…‹ã€‘<br>ãƒ»ã‚¢ãƒƒãƒ‘ãƒ¼ï¼šç›®ç«‹ã¤æ±šã‚Œãªã—<br>ãƒ»ã‚½ãƒ¼ãƒ«ï¼šã»ã¼æœªä½¿ç”¨ãƒ¬ãƒ™ãƒ«<br>ãƒ»ä»˜å±å“ï¼šç®±ã‚ã‚Šã€æ›¿ãˆç´ãªã—</p>
          <p>ã€ã‚µã‚¤ã‚ºã€‘27cmï¼ˆUS9ï¼‰<br>ã€ã‚«ãƒ©ãƒ¼ã€‘ãƒ›ãƒ¯ã‚¤ãƒˆ/ãƒ›ãƒ¯ã‚¤ãƒˆ</p>
          <p>å³è³¼å…¥OKã§ã™ã€‚<br>24æ™‚é–“ä»¥å†…ã«ç™ºé€ã„ãŸã—ã¾ã™ã€‚</p>
        </div>
        <button onclick="copyText(document.getElementById('listing-desc').innerText);showToast('èª¬æ˜æ–‡ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ')" class="mt-3 text-xs text-brand-600 font-semibold flex items-center gap-1 hover:text-brand-800">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"/></svg>
          ã™ã¹ã¦ã‚³ãƒ”ãƒ¼
        </button>
      </div>

      <!-- Category & Tips -->
      <div class="result-section card p-5">
        <div class="flex items-center gap-2 mb-3">
          <span class="bg-purple-100 text-purple-700 text-xs font-bold px-2.5 py-1 rounded-lg">ã‚«ãƒ†ã‚´ãƒªææ¡ˆ</span>
        </div>
        <p class="text-sm font-semibold text-gray-800 mb-1">ãƒ¡ãƒ³ã‚º &gt; é´ &gt; ã‚¹ãƒ‹ãƒ¼ã‚«ãƒ¼</p>
        <p class="text-xs text-gray-500">ãƒ–ãƒ©ãƒ³ãƒ‰: Nike &nbsp;|&nbsp; ã‚µã‚¤ã‚º: 27cm</p>
      </div>

      <div class="result-section card p-5">
        <div class="flex items-center gap-2 mb-3">
          <span class="bg-orange-100 text-orange-700 text-xs font-bold px-2.5 py-1 rounded-lg">ğŸ“¸ å†™çœŸã®ã‚³ãƒ„</span>
        </div>
        <ul class="text-sm text-gray-700 space-y-2">
          <li class="flex items-start gap-2"><span class="text-brand-500 mt-0.5">âœ“</span> ã‚½ãƒ¼ãƒ«ã®çŠ¶æ…‹ãŒåˆ†ã‹ã‚‹ã‚¢ãƒ³ã‚°ãƒ«ã‚’è¿½åŠ ã™ã‚‹ã¨æˆç´„ç‡ãŒ <strong class="text-brand-700">+18%</strong> å‘ä¸Š</li>
          <li class="flex items-start gap-2"><span class="text-brand-500 mt-0.5">âœ“</span> ç™½èƒŒæ™¯ Ã— è‡ªç„¶å…‰ã§æ’®å½±ã™ã‚‹ã®ãŒãƒ™ã‚¹ãƒˆ</li>
          <li class="flex items-start gap-2"><span class="text-brand-500 mt-0.5">âœ“</span> ã‚¿ã‚°ãƒ»ã‚µã‚¤ã‚ºè¡¨è¨˜ã®å†™çœŸã‚’è¿½åŠ ã—ã¾ã—ã‚‡ã†</li>
        </ul>
      </div>

      <!-- Actions -->
      <div class="result-section flex gap-3">
        <button onclick="showToast('å‡ºå“æ–‡ã‚’ä¸‹æ›¸ãã«ä¿å­˜ã—ã¾ã—ãŸ')" class="flex-1 bg-white border-2 border-brand-500 text-brand-700 font-bold py-3.5 rounded-2xl text-sm hover:bg-brand-50 transition">
          ä¸‹æ›¸ãä¿å­˜
        </button>
        <button onclick="showToast('ãƒ¡ãƒ«ã‚«ãƒªã«å‡ºå“æ–‡ã‚’é€ä¿¡ã—ã¾ã—ãŸ')" class="flex-1 gradient-btn text-white font-bold py-3.5 rounded-2xl text-sm shadow-lg">
          ãã®ã¾ã¾å‡ºå“
        </button>
      </div>
    `;
    revealResults(results);
    // Animate price bar
    setTimeout(() => {
      const bar = document.getElementById('price-bar');
      if (bar) bar.style.width = '62%';
    }, 400);
  }, 2000);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   2. InvoiceAI
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function processInvoice() {
  const client = document.getElementById('inv-client').value || 'æ ªå¼ä¼šç¤¾ã‚µãƒ³ãƒ—ãƒ«';
  const item = document.getElementById('inv-item').value || 'Webã‚µã‚¤ãƒˆåˆ¶ä½œ';
  const amount = parseInt(document.getElementById('inv-amount').value) || 300000;
  const deadline = document.getElementById('inv-deadline').value || '2025/02/28';
  const tax = Math.floor(amount * 0.1);
  const total = amount + tax;

  const loader = document.getElementById('invoice-loading');
  const results = document.getElementById('invoice-results');
  results.innerHTML = '';
  loader.classList.remove('hidden');

  const invNo = 'INV-' + new Date().getFullYear() + '-' + String(Math.floor(Math.random() * 9000) + 1000);
  const today = new Date();
  const dateStr = today.getFullYear() + '/' + String(today.getMonth()+1).padStart(2,'0') + '/' + String(today.getDate()).padStart(2,'0');

  setTimeout(() => {
    loader.classList.add('hidden');
    results.innerHTML = `
      <!-- Invoice Preview -->
      <div class="result-section card overflow-hidden">
        <div class="bg-gradient-to-r from-brand-800 to-teal-700 text-white px-5 py-4 flex justify-between items-start">
          <div>
            <p class="text-xs text-brand-200 font-medium">è«‹æ±‚æ›¸ç•ªå·</p>
            <p class="text-lg font-bold mt-0.5">${invNo}</p>
          </div>
          <div class="text-right">
            <p class="text-xs text-brand-200 font-medium">ç™ºè¡Œæ—¥</p>
            <p class="text-sm font-semibold mt-0.5">${dateStr}</p>
          </div>
        </div>
        <div class="p-5">
          <div class="flex justify-between mb-5">
            <div>
              <p class="text-xs text-gray-400 font-medium">è«‹æ±‚å…ˆ</p>
              <p class="text-sm font-bold text-gray-900 mt-0.5">${client} å¾¡ä¸­</p>
            </div>
            <div class="text-right">
              <p class="text-xs text-gray-400 font-medium">æ”¯æ‰•æœŸé™</p>
              <p class="text-sm font-bold text-red-600 mt-0.5">${deadline}</p>
            </div>
          </div>

          <!-- Line items -->
          <div class="border border-gray-100 rounded-xl overflow-hidden mb-4">
            <div class="bg-gray-50 px-4 py-2 text-xs font-bold text-gray-500 flex">
              <span class="flex-1">é …ç›®</span>
              <span class="w-16 text-right">æ•°é‡</span>
              <span class="w-24 text-right">é‡‘é¡</span>
            </div>
            <div class="px-4 py-3 text-sm flex border-t border-gray-50">
              <span class="flex-1 text-gray-800 font-medium">${item}</span>
              <span class="w-16 text-right text-gray-500">1</span>
              <span class="w-24 text-right font-semibold text-gray-900">Â¥${formatNum(amount)}</span>
            </div>
          </div>

          <!-- Totals -->
          <div class="space-y-2 border-t border-gray-100 pt-4">
            <div class="flex justify-between text-sm">
              <span class="text-gray-500">å°è¨ˆ</span>
              <span class="font-semibold text-gray-700">Â¥${formatNum(amount)}</span>
            </div>
            <div class="flex justify-between text-sm">
              <span class="text-gray-500">æ¶ˆè²»ç¨ï¼ˆ10%ï¼‰</span>
              <span class="font-semibold text-gray-700">Â¥${formatNum(tax)}</span>
            </div>
            <div class="flex justify-between text-lg font-extrabold pt-2 border-t border-gray-100">
              <span class="text-brand-800">åˆè¨ˆ</span>
              <span class="text-brand-700">Â¥${formatNum(total)}</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Bank info -->
      <div class="result-section card p-5">
        <div class="flex items-center gap-2 mb-3">
          <span class="bg-brand-100 text-brand-700 text-xs font-bold px-2.5 py-1 rounded-lg">ğŸ¦ æŒ¯è¾¼å…ˆï¼ˆè‡ªå‹•å…¥åŠ›ï¼‰</span>
        </div>
        <div class="bg-gray-50 rounded-xl p-4 text-sm space-y-1.5">
          <div class="flex justify-between"><span class="text-gray-500">éŠ€è¡Œå</span><span class="font-semibold text-gray-800">ä¸‰è±UFJéŠ€è¡Œ</span></div>
          <div class="flex justify-between"><span class="text-gray-500">æ”¯åº—å</span><span class="font-semibold text-gray-800">æ¸‹è°·æ”¯åº—ï¼ˆ150ï¼‰</span></div>
          <div class="flex justify-between"><span class="text-gray-500">å£åº§ç¨®åˆ¥</span><span class="font-semibold text-gray-800">æ™®é€š</span></div>
          <div class="flex justify-between"><span class="text-gray-500">å£åº§ç•ªå·</span><span class="font-semibold text-gray-800">1234567</span></div>
          <div class="flex justify-between"><span class="text-gray-500">åç¾©</span><span class="font-semibold text-gray-800">ãƒ¤ãƒãƒ€ ã‚¿ãƒ­ã‚¦</span></div>
        </div>
      </div>

      <!-- Monthly Summary -->
      <div class="result-section card p-5">
        <div class="flex items-center gap-2 mb-3">
          <span class="bg-indigo-100 text-indigo-700 text-xs font-bold px-2.5 py-1 rounded-lg">ğŸ“ˆ ä»Šæœˆã®å£²ä¸Šã‚µãƒãƒªãƒ¼</span>
        </div>
        <div class="grid grid-cols-3 gap-3 text-center">
          <div class="bg-gray-50 rounded-xl p-3">
            <p class="text-xs text-gray-500">è«‹æ±‚ä»¶æ•°</p>
            <p class="text-xl font-extrabold text-gray-900 mt-1">4ä»¶</p>
          </div>
          <div class="bg-gray-50 rounded-xl p-3">
            <p class="text-xs text-gray-500">ä»Šæœˆå£²ä¸Š</p>
            <p class="text-xl font-extrabold text-brand-700 mt-1">Â¥${formatNum(total + 528000)}</p>
          </div>
          <div class="bg-gray-50 rounded-xl p-3">
            <p class="text-xs text-gray-500">å‰æœˆæ¯”</p>
            <p class="text-xl font-extrabold text-brand-600 mt-1">+12%</p>
          </div>
        </div>
      </div>

      <!-- Send options -->
      <div class="result-section card p-5">
        <div class="flex items-center gap-2 mb-3">
          <span class="bg-sky-100 text-sky-700 text-xs font-bold px-2.5 py-1 rounded-lg">ğŸ“§ ãƒ¡ãƒ¼ãƒ«é€ä¿¡</span>
        </div>
        <div class="flex items-center gap-3">
          <input type="email" placeholder="sample@example.com" class="flex-1 border border-gray-200 rounded-xl px-4 py-3 text-sm" id="inv-email">
          <button onclick="showToast('è«‹æ±‚æ›¸ã‚’ãƒ¡ãƒ¼ãƒ«ã§é€ä¿¡ã—ã¾ã—ãŸ')" class="gradient-btn text-white text-sm font-bold px-5 py-3 rounded-xl whitespace-nowrap shadow">é€ä¿¡</button>
        </div>
        <p class="text-xs text-gray-400 mt-2">PDFæ·»ä»˜ã§é€ä¿¡ã•ã‚Œã¾ã™ã€‚ã‚¤ãƒ³ãƒœã‚¤ã‚¹åˆ¶åº¦å¯¾å¿œæ¸ˆã¿ã€‚</p>
      </div>

      <!-- Actions -->
      <div class="result-section flex gap-3">
        <button onclick="showToast('PDFã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸ')" class="flex-1 bg-white border-2 border-brand-500 text-brand-700 font-bold py-3.5 rounded-2xl text-sm hover:bg-brand-50 transition">
          PDFä¿å­˜
        </button>
        <button onclick="showToast('è«‹æ±‚æ›¸ã‚’é€ä¿¡ã—ã¾ã—ãŸ')" class="flex-1 gradient-btn text-white font-bold py-3.5 rounded-2xl text-sm shadow-lg">
          é€ä¿¡ã™ã‚‹
        </button>
      </div>
    `;
    revealResults(results);
  }, 2000);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   3. ContractAI
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let contractFileReady = false;

function handleContractFile(input) {
  const file = input.files[0];
  if (!file) return;
  contractFileReady = true;
  const zone = document.getElementById('contract-upload');
  zone.classList.add('has-file');
  document.getElementById('contract-upload-content').classList.add('hidden');
  const preview = document.getElementById('contract-preview');
  preview.classList.remove('hidden');
  document.getElementById('contract-file-name').textContent = file.name;
  const sizeKB = (file.size / 1024).toFixed(0);
  document.getElementById('contract-file-size').textContent = sizeKB + ' KB';
}

function processContract() {
  if (!contractFileReady) {
    showToast('å¥‘ç´„æ›¸ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã ã•ã„');
    return;
  }
  const loader = document.getElementById('contract-loading');
  const results = document.getElementById('contract-results');
  results.innerHTML = '';
  loader.classList.remove('hidden');

  setTimeout(() => {
    loader.classList.add('hidden');
    results.innerHTML = `
      <!-- Risk Score -->
      <div class="result-section card p-5 text-center">
        <p class="text-xs text-gray-400 font-medium mb-2">ç·åˆãƒªã‚¹ã‚¯ã‚¹ã‚³ã‚¢</p>
        <div class="relative inline-flex items-center justify-center">
          <svg width="120" height="120" viewBox="0 0 120 120" class="transform -rotate-90">
            <circle cx="60" cy="60" r="50" fill="none" stroke="#e5e7eb" stroke-width="10"/>
            <circle cx="60" cy="60" r="50" fill="none" stroke="url(#riskGrad)" stroke-width="10"
              stroke-dasharray="314" stroke-dashoffset="314" stroke-linecap="round"
              id="risk-circle"/>
            <defs>
              <linearGradient id="riskGrad" x1="0%" y1="0%" x2="100%" y2="0%">
                <stop offset="0%" stop-color="#f59e0b"/>
                <stop offset="100%" stop-color="#ef4444"/>
              </linearGradient>
            </defs>
          </svg>
          <span class="absolute text-3xl font-extrabold text-gray-900" id="risk-score-num">0</span>
        </div>
        <p class="text-sm text-amber-600 font-semibold mt-2">ä¸­ã€œé«˜ãƒªã‚¹ã‚¯ â€” å°‚é–€å®¶ã¸ã®ç›¸è«‡ã‚’æ¨å¥¨</p>
      </div>

      <!-- High Risk 1 -->
      <div class="result-section card overflow-hidden border-l-4 border-red-500">
        <div class="p-5">
          <div class="flex items-center gap-2 mb-2">
            <span class="bg-red-100 text-red-700 text-xs font-bold px-2.5 py-1 rounded-lg">ğŸ”´ é«˜ãƒªã‚¹ã‚¯</span>
            <span class="text-xs text-gray-400">ç¬¬8æ¡</span>
          </div>
          <p class="text-sm font-bold text-gray-900 mb-2">ç«¶æ¥­é¿æ­¢ç¾©å‹™ãŒéåº¦ã«åºƒç¯„</p>
          <div class="bg-red-50 rounded-xl p-3 mb-3">
            <p class="text-xs text-red-700 italic leading-relaxed">ã€Œå¥‘ç´„çµ‚äº†å¾Œ<strong>5å¹´é–“</strong>ã€æ—¥æœ¬å›½å†…ã«ãŠã„ã¦é¡ä¼¼æ¥­å‹™ã‚’ä¸€åˆ‡è¡Œã£ã¦ã¯ãªã‚‰ãªã„ã€</p>
          </div>
          <div class="flex items-start gap-2">
            <span class="text-brand-500 mt-0.5 text-sm">ğŸ’¡</span>
            <p class="text-xs text-gray-600 leading-relaxed">ä¸€èˆ¬çš„ã«ç«¶æ¥­é¿æ­¢ã¯<strong>1ã€œ2å¹´</strong>ãŒç›¸å ´ã§ã™ã€‚5å¹´ã¯è£åˆ¤ã§ã‚‚ç„¡åŠ¹ã¨åˆ¤æ–­ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚æœŸé–“ã¨åœ°ç†çš„ç¯„å›²ã®çŸ­ç¸®ã‚’äº¤æ¸‰ã—ã¦ãã ã•ã„ã€‚</p>
          </div>
        </div>
      </div>

      <!-- High Risk 2 -->
      <div class="result-section card overflow-hidden border-l-4 border-red-500">
        <div class="p-5">
          <div class="flex items-center gap-2 mb-2">
            <span class="bg-red-100 text-red-700 text-xs font-bold px-2.5 py-1 rounded-lg">ğŸ”´ é«˜ãƒªã‚¹ã‚¯</span>
            <span class="text-xs text-gray-400">ç¬¬12æ¡</span>
          </div>
          <p class="text-sm font-bold text-gray-900 mb-2">æå®³è³ å„Ÿã®ä¸Šé™ãŒæœªè¨­å®š</p>
          <div class="bg-red-50 rounded-xl p-3 mb-3">
            <p class="text-xs text-red-700 italic leading-relaxed">ã€Œä¹™ã¯ç”²ã«ç”Ÿã˜ãŸ<strong>ä¸€åˆ‡ã®æå®³</strong>ã‚’è³ å„Ÿã™ã‚‹ç¾©å‹™ã‚’è² ã†ã€</p>
          </div>
          <div class="flex items-start gap-2">
            <span class="text-brand-500 mt-0.5 text-sm">ğŸ’¡</span>
            <p class="text-xs text-gray-600 leading-relaxed">è³ å„Ÿä¸Šé™ãŒãªã„ã¨ã€å ±é…¬é¡ã‚’å¤§å¹…ã«è¶…ãˆã‚‹è«‹æ±‚ã‚’å—ã‘ã‚‹æã‚ŒãŒã‚ã‚Šã¾ã™ã€‚<strong>ã€Œå ±é…¬ç·é¡ã‚’ä¸Šé™ã¨ã™ã‚‹ã€</strong>æ¡é …ã®è¿½åŠ ã‚’æ±‚ã‚ã¦ãã ã•ã„ã€‚</p>
          </div>
        </div>
      </div>

      <!-- Medium Risk -->
      <div class="result-section card overflow-hidden border-l-4 border-amber-400">
        <div class="p-5">
          <div class="flex items-center gap-2 mb-2">
            <span class="bg-amber-100 text-amber-700 text-xs font-bold px-2.5 py-1 rounded-lg">ğŸŸ¡ ä¸­ãƒªã‚¹ã‚¯</span>
            <span class="text-xs text-gray-400">ç¬¬5æ¡</span>
          </div>
          <p class="text-sm font-bold text-gray-900 mb-2">è‘—ä½œæ¨©ã®å¸°å±ãŒæ›–æ˜§</p>
          <div class="bg-amber-50 rounded-xl p-3 mb-3">
            <p class="text-xs text-amber-700 italic leading-relaxed">ã€Œæˆæœç‰©ã®è‘—ä½œæ¨©ã¯<strong>ç”²ä¹™å”è­°ã®ä¸Š</strong>æ±ºå®šã™ã‚‹ã€</p>
          </div>
          <div class="flex items-start gap-2">
            <span class="text-brand-500 mt-0.5 text-sm">ğŸ’¡</span>
            <p class="text-xs text-gray-600 leading-relaxed">ã€Œå”è­°ã®ä¸Šã€ã¯å¾Œã®ãƒˆãƒ©ãƒ–ãƒ«ã®å…ƒã§ã™ã€‚<strong>ç´å“ãƒ»å…¥é‡‘å®Œäº†æ™‚ã«ç”²ã«ç§»è»¢</strong>ã€ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒªã‚ªåˆ©ç”¨æ¨©ã¯ç•™ä¿ã€ãªã©æ˜ç¢ºã«ã—ã¾ã—ã‚‡ã†ã€‚</p>
          </div>
        </div>
      </div>

      <!-- Safe -->
      <div class="result-section card overflow-hidden border-l-4 border-green-500">
        <div class="p-5">
          <div class="flex items-center gap-2 mb-2">
            <span class="bg-green-100 text-green-700 text-xs font-bold px-2.5 py-1 rounded-lg">ğŸŸ¢ å®‰å…¨</span>
            <span class="text-xs text-gray-400">ç¬¬3æ¡</span>
          </div>
          <p class="text-sm font-bold text-gray-900 mb-2">å ±é…¬ãƒ»æ”¯æ‰•æ¡ä»¶</p>
          <p class="text-xs text-gray-600 leading-relaxed">å ±é…¬é¡ã€æ”¯æ‰•æ™‚æœŸï¼ˆæœˆæœ«ç· ã‚ç¿Œæœˆæœ«æ‰•ã„ï¼‰ã€æŒ¯è¾¼å…ˆãŒæ˜ç¢ºã«è¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚</p>
        </div>
      </div>

      <!-- Summary -->
      <div class="result-section card p-5">
        <div class="flex items-center gap-2 mb-3">
          <span class="bg-brand-100 text-brand-700 text-xs font-bold px-2.5 py-1 rounded-lg">ğŸ“‹ è¨ºæ–­ã‚µãƒãƒªãƒ¼</span>
        </div>
        <div class="grid grid-cols-3 gap-3 text-center mb-4">
          <div class="bg-red-50 rounded-xl p-3">
            <p class="text-2xl font-extrabold text-red-600">2</p>
            <p class="text-xs text-red-500 font-medium">é«˜ãƒªã‚¹ã‚¯</p>
          </div>
          <div class="bg-amber-50 rounded-xl p-3">
            <p class="text-2xl font-extrabold text-amber-600">1</p>
            <p class="text-xs text-amber-500 font-medium">ä¸­ãƒªã‚¹ã‚¯</p>
          </div>
          <div class="bg-green-50 rounded-xl p-3">
            <p class="text-2xl font-extrabold text-green-600">1</p>
            <p class="text-xs text-green-500 font-medium">å®‰å…¨</p>
          </div>
        </div>
        <div class="bg-gray-50 rounded-xl p-4">
          <p class="text-sm text-gray-700 leading-relaxed"><strong class="text-brand-700">AIã‹ã‚‰ã®ææ¡ˆï¼š</strong>é«˜ãƒªã‚¹ã‚¯æ¡é …ãŒ2ä»¶æ¤œå‡ºã•ã‚Œã¾ã—ãŸã€‚ç‰¹ã«ç«¶æ¥­é¿æ­¢ã¨æå®³è³ å„Ÿã¯ã€ãƒ•ãƒªãƒ¼ãƒ©ãƒ³ã‚¹ã«ã¨ã£ã¦å¤§ããªå½±éŸ¿ãŒã‚ã‚Šã¾ã™ã€‚ç½²åå‰ã«å¼è­·å£«ã¸ã®ç¢ºèªã‚’å¼·ããŠã™ã™ã‚ã—ã¾ã™ã€‚</p>
        </div>
      </div>

      <!-- Actions -->
      <div class="result-section flex gap-3">
        <button onclick="showToast('ãƒ¬ãƒãƒ¼ãƒˆã‚’PDFã§ä¿å­˜ã—ã¾ã—ãŸ')" class="flex-1 bg-white border-2 border-brand-500 text-brand-700 font-bold py-3.5 rounded-2xl text-sm hover:bg-brand-50 transition">
          ãƒ¬ãƒãƒ¼ãƒˆä¿å­˜
        </button>
        <button onclick="showToast('å¼è­·å£«ãƒãƒƒãƒãƒ³ã‚°ã‚’é–‹å§‹ã—ã¾ã™')" class="flex-1 gradient-btn text-white font-bold py-3.5 rounded-2xl text-sm shadow-lg">
          å¼è­·å£«ã«ç›¸è«‡
        </button>
      </div>
    `;
    revealResults(results);

    // Animate risk score circle & number
    setTimeout(() => {
      const circle = document.getElementById('risk-circle');
      if (circle) {
        // 6.2/10 => 62% of 314
        circle.style.transition = 'stroke-dashoffset 1.5s ease';
        circle.style.strokeDashoffset = 314 - (314 * 0.62);
      }
      // Animate number
      const numEl = document.getElementById('risk-score-num');
      if (numEl) {
        let current = 0;
        const target = 6.2;
        const step = target / 30;
        const interval = setInterval(() => {
          current += step;
          if (current >= target) {
            current = target;
            clearInterval(interval);
          }
          numEl.textContent = current.toFixed(1);
        }, 40);
      }
    }, 300);
  }, 2000);
}

/* â”€â”€â”€â”€â”€ Copy Utility â”€â”€â”€â”€â”€ */
function copyText(text) {
  if (navigator.clipboard) {
    navigator.clipboard.writeText(text);
  } else {
    const ta = document.createElement('textarea');
    ta.value = text;
    document.body.appendChild(ta);
    ta.select();
    document.execCommand('copy');
    document.body.removeChild(ta);
  }
}

/* â”€â”€â”€â”€â”€ Drag & Drop â”€â”€â”€â”€â”€ */
['listing-upload', 'contract-upload'].forEach(id => {
  const zone = document.getElementById(id);
  if (!zone) return;
  zone.addEventListener('dragover', e => {
    e.preventDefault();
    zone.classList.add('dragover');
  });
  zone.addEventListener('dragleave', () => {
    zone.classList.remove('dragover');
  });
  zone.addEventListener('drop', e => {
    e.preventDefault();
    zone.classList.remove('dragover');
    const fileInput = id === 'listing-upload'
      ? document.getElementById('listing-file')
      : document.getElementById('contract-file');
    fileInput.files = e.dataTransfer.files;
    fileInput.dispatchEvent(new Event('change'));
  });
});
</script>
</body>
</html>
